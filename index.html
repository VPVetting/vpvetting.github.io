<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100;200;300;400;500;600;700;800;900&display=swap"
      rel="stylesheet"
    />

    <title>Plot Listing HTML5 Website Template</title>

    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet" />

    <!-- Additional CSS Files -->
    <link rel="stylesheet" href="assets/css/fontawesome.css" />
    <link rel="stylesheet" href="assets/css/templatemo-plot-listing.css" />
    <link rel="stylesheet" href="assets/css/animated.css" />
    <link rel="stylesheet" href="assets/css/owl.css" />
    <!--

TemplateMo 564 Plot Listing

https://templatemo.com/tm-564-plot-listing

-->
  </head>

  <body>
    <!-- ***** Preloader Start ***** -->
    <div id="js-preloader" class="js-preloader">
      <div class="preloader-inner">
        <span class="dot"></span>
        <div class="dots">
          <span></span>
          <span></span>
          <span></span>
        </div>
      </div>
    </div>
    <!-- ***** Preloader End ***** -->

    <div class="main-banner">
      <div class="container">
        <div class="row">
          <div class="col-lg-12">
            <div class="top-text header-text">
              <h2>VR Privacy Policy Analysis</h2>
            </div>
          </div>
          <div class="col-lg-12 align-self-center">
            <div class="col-lg-12">
              <form
                id="search-form"
                name="gs"
                method="submit"
                role="search"
                action="#"
              >
                <div class="row">
                  <div class="col-lg-4 align-self-center">
                    <fieldset>
                      <select
                        name="paltform_select"
                        class="form-select"
                        aria-label="Area"
                        id="platform"
                        onchange="select_plat()"
                      >
                        <option value="" disabled selected hidden>
                          --Please select Platform--
                        </option>
                        <option value="Platform1">Platform1</option>
                        <option value="Platform2">Platform2</option>
                        <option value="Platform3">Platform3</option>
                        <option value="Platform4">SteamVR</option>
                      </select>
                    </fieldset>
                  </div>

                  <div class="col-lg-4 align-self-center">
                    <fieldset>
                      <select
                        name="gamename_select"
                        class="form-select"
                        aria-label="Default select example"
                        id="name"
                        onchange="select_name()"
                      >
                        <option value="" disabled selected hidden>
                          --Please select GameName--
                        </option>
                      </select>
                    </fieldset>
                  </div>
                  <div class="col-lg-4">
                    <fieldset>
                      <button class="main-button" onclick="query('vr_pps',1)">
                        <i class="fa fa-search"></i> Query
                      </button>
                    </fieldset>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="popular-categories">
      <div class="container">
        <div class="row">
          <div class="col-lg-12">
            <div class="section-heading">
              Please select platform and gamename first!
            </div>
          </div>
          <div class="col-lg-12">
            <div class="naccs">
              <div class="grid">
                <div class="row">
                  <div class="col-lg-12 align-self-center">
                    <ul class="nacc">
                      <li class="active">
                        <div>
                          <div class="row">
                            <div class="col-lg-12 align-self-center">
                              <div class="left-text">
                                <h2>Metadata</h2>
                                <div class="text-line" display="flex">
                                  <div class="label">Platform:</div>
                                  <div class="text">SteamVR</div>
                                </div>
                                <div class="text-line" display="flex">
                                  <div class="label">Item Page Link:</div>
                                  <div class="text">
                                    <a
                                      href="https://store.steampowered.com/app/622290/1_multi_screen_media_player_gallery_video_wall_photo_slideshow_wizard_app/?snr=1_7_7_151_150_223\nhttps://store.steampowered.com/app/622290/1_multi_screen_media_player_gallery_video_wall_photo_slideshow_wizard_app/?snr=1_7_7_151_150_200"
                                      >Link</a
                                    >
                                  </div>
                                </div>
                                <div class="text-line" display="flex">
                                  <div class="label">Publisher:</div>
                                  <div class="text">avolight</div>
                                </div>
                                <div class="text-line" display="flex">
                                  <div class="label">Genres:</div>
                                  <div class="text">
                                    early access, video production, utilities,
                                    vr
                                  </div>
                                </div>
                                <div class="text-line" display="flex">
                                  <div class="label">Price:</div>
                                  <div class="text">Paid</div>
                                </div>
                                <div class="text-line" display="flex">
                                  <div class="label">Description:</div>
                                  <div class="text">
                                    Surround yourself with multiple screens of
                                    image slideshows and video players. Try it
                                    out to see how it runs and what’s currently
                                    supported; if a feature you want isn't
                                    there, I hope you check back later.
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-lg-12">
            <div class="criteria">
              <h2>Criteria</h2>
              <div class="container">
                <div class="row">
                  <div class="col-3">
                    <div class="label">C1-Availability:</div>
                  </div>
                  <div class="col-9">
                    <a href="https://discord.com/privacy">PP_link</a>
                  </div>
                </div>

                <div class="row">
                  <div class="col-3">
                    <div class="label">C2-Completeness:</div>
                  </div>
                  <div class="col-9">
                    <div class="container">
                      <form class="form-inline">
                        <div class="form-check mr-3">
                          <input
                            class="form-check-input"
                            type="checkbox"
                            value=""
                            id="checkbox1"
                            checked
                          />
                          <label class="form-check-label" for="checkbox1">
                            Option 1
                          </label>
                        </div>
                        <div class="form-check mr-3">
                          <input
                            class="form-check-input"
                            type="checkbox"
                            value=""
                            id="checkbox2"
                            disabled
                          />
                          <label class="form-check-label" for="checkbox2">
                            Option 2
                          </label>
                        </div>
                        <div class="form-check mr-3">
                          <input
                            class="form-check-input"
                            type="checkbox"
                            value=""
                            id="checkbox3"
                            disabled
                          />
                          <label class="form-check-label" for="checkbox3">
                            Option 3
                          </label>
                        </div>
                        <div class="form-check mr-3">
                          <input
                            class="form-check-input"
                            type="checkbox"
                            value=""
                            id="checkbox4"
                            disabled
                          />
                          <label class="form-check-label" for="checkbox4">
                            Option 4
                          </label>
                        </div>
                        <div class="form-check mr-3">
                          <input
                            class="form-check-input"
                            type="checkbox"
                            value=""
                            id="checkbox5"
                            disabled
                          />
                          <label class="form-check-label" for="checkbox5">
                            Option 5
                          </label>
                        </div>
                        <div class="form-check mr-3">
                          <input
                            class="form-check-input"
                            type="checkbox"
                            value=""
                            id="checkbox6"
                            disabled
                          />
                          <label class="form-check-label" for="checkbox6">
                            Option 6
                          </label>
                        </div>
                        <div class="form-check mr-3">
                          <input
                            class="form-check-input"
                            type="checkbox"
                            value=""
                            id="checkbox7"
                            disabled
                          />
                          <label class="form-check-label" for="checkbox7">
                            Option 7
                          </label>
                        </div>
                      </form>
                    </div>
                    <div class="container mt-5">
                      <h3>CUS Tuples List</h3>
                      <table
                        class="table"
                        style="background: white; border-radius: 5px"
                      >
                        <thead>
                          <tr>
                            <th>Entity</th>
                            <th>Dataobj</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td>Customer</td>
                            <td>Orders</td>
                          </tr>
                          <tr>
                            <td>Product</td>
                            <td>Inventory</td>
                          </tr>
                          <tr>
                            <td>Employee</td>
                            <td>Payroll</td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-3">
                    <div class="label">C3-Granularity:</div>
                  </div>
                  <div class="col-9">test2</div>
                </div>
                <div class="row">
                  <div class="col-3">
                    <div class="label">C4-Minimization:</div>
                  </div>
                  <div class="col-9">
                    <div class="container">
                      <div class="row">
                        <div class="col-md-12">
                          <h3>Counterparts</h3>
                          <ul class="list-group">
                            <li class="list-group-item">
                              <span class="badge badge-primary badge-pill"
                                >2392</span
                              >
                              mermaidvr video player
                            </li>
                            <li class="list-group-item">
                              <span class="badge badge-primary badge-pill"
                                >1602</span
                              >
                              gizmovr video player
                            </li>
                            <li class="list-group-item">
                              <span class="badge badge-primary badge-pill"
                                >1020</span
                              >
                              deovr video player
                            </li>
                            <li class="list-group-item">
                              <span class="badge badge-primary badge-pill"
                                >2488</span
                              >
                              moon vr video player
                            </li>
                            <li class="list-group-item">
                              <span class="badge badge-primary badge-pill"
                                >4380</span
                              >
                              viveport video
                            </li>
                            <li class="list-group-item">
                              <span class="badge badge-primary badge-pill"
                                >0742</span
                              >
                              cinevr
                            </li>
                            <li class="list-group-item">
                              <span class="badge badge-primary badge-pill"
                                >0742</span
                              >
                              cinevr
                            </li>
                            <li class="list-group-item">
                              <span class="badge badge-primary badge-pill"
                                >3466</span
                              >
                              slivertv
                            </li>
                            <li class="list-group-item">
                              <span class="badge badge-primary badge-pill"
                                >4336</span
                              >
                              virtual desktop
                            </li>
                            <li class="list-group-item">
                              <span class="badge badge-primary badge-pill"
                                >3574</span
                              >
                              spacesys
                            </li>
                            <li class="list-group-item">
                              <span class="badge badge-primary badge-pill"
                                >4203</span
                              >
                              tvori
                            </li>
                          </ul>
                        </div>
                        <div class="col-md-12">
                          <h3>Overboard Object</h3>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-3">
                    <div class="label">C5-Consistency:</div>
                  </div>
                  <div class="col-9">
                    <div class="container">
                      <div class="row">
                        <div class="col-md-12">
                          <ul class="list-group">
                            <li class="list-group-item">
                              <span class="badge badge-primary badge-pill"
                                >dataobj</span
                              >
                              Consisytency
                            </li>
                            <li class="list-group-item">
                              <span class="badge badge-primary badge-pill"
                                >dataobject</span
                              >
                              Inconsistency
                            </li>
                          </ul>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <footer>
      <div class="container"></div>
    </footer>

    <!-- Scripts -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/owl-carousel.js"></script>
    <script src="assets/js/animation.js"></script>
    <script src="assets/js/imagesloaded.js"></script>
    <script src="assets/js/custom.js"></script>
    <link
      rel="stylesheet"
      href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/4.6.0/css/bootstrap.min.css"
    />
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/popper.js/2.9.3/umd/popper.min.js"></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/4.6.0/js/bootstrap.min.js"></script>
    <script>
      //获取所有input盒子
      const inputs = document.querySelectorAll("select");
      for (i = 0; i < inputs.length; i++) {}
      let tbody = document.getElementsByClassName("section-heading")[0]; //获取元素
      let bool = false; //控制更新阀门
      let sid = ""; //存储 key值
      vrpp_lis = [];

      //打开数据库
      function openDB(dbname, version) {
        let db = null;
        let req = indexedDB.open(dbName, version);

        return new Promise((resolve, reject) => {
          req.onerror = () => {
            console.log("Error!");
            reject("Error!");
          };
          req.onsuccess = (e) => {
            db = e.target.result;
            console.log("Open Successfully");
            resolve(db);
          };
          req.onupgradeneeded = (e) => {
            db = e.target.result;
            if (!db.objectStoreNames.contains("vr_pps")) {
              //返回对象仓库
              let store = db.createObjectStore("vr_pps", {
                keyPath: "id",
                autoIncrement: true,
              });
              //创建索引
              store.createIndex("_id", "_id", { unique: true });
              store.createIndex("idx", "idx", { unique: true });
              store.createIndex("name", "name", { unique: false });
              store.createIndex("platform", "platform", { unique: false });
              store.createIndex("item_page_link", "item_page_link", {
                unique: false,
              });
              store.createIndex("website_link", "website_link", {
                unique: false,
              });
              store.createIndex("pp_link", "pp_link", { unique: false });
              store.createIndex("publisher", "publisher", { unique: false });
              store.createIndex("genres", "genres", { unique: false });
              store.createIndex("description", "description", {
                unique: false,
              });
              store.createIndex("price", "price", { unique: false });
              store.createIndex("pp_components", "pp_components", {
                unique: false,
              });
              store.createIndex("k_counterparts", "k_counterparts", {
                unique: false,
              });
              console.log("Create Successfully");
            }
          };
        });
      }
      let version = 1;
      let dbName = "vr_pps";
      let db;
      let manu_res = null;
      result_game = null;

      //初始化DB，写入VR_PP数据信息
      function initDB(dbName, version) {
        let result = openDB(dbName, version).then((db) => {
          let request = db.transaction(dbName, "readwrite").objectStore(dbName);
          for (i = 0; i < vrpp_lis.length; ++i) {
            result = request.add(vrpp_lis[i]);
            console.log(vrpp_lis[i]);
            result.onsuccess = function (e) {
              console.log("Add Successfully!");
            };
            result.onerror = function (e) {
              console.log("Fail to add!");
            };
          }
          db.close();
        });
      }

      function delDB(dbName) {
        const DBDeleteRequest = window.indexedDB.deleteDatabase(dbName);
        DBDeleteRequest.onerror = (event) => {
          console.error("Error deleting database.");
        };

        DBDeleteRequest.onsuccess = (event) => {
          console.log("Database deleted successfully");

          console.log(event.result); // should be undefined
        };
      }

      function select_plat() {
        var nSel = document.getElementById("platform");
        index = nSel.selectedIndex;
        var selected_manu = nSel[index].text;
        let request = openDB(dbName, version).then((db) => {
          let store = db.transaction(dbName, "readwrite").objectStore(dbName);
          let index = store.index("platform");
          let getAllrequest = index.getAll(selected_manu);
          //游标请求成功
          var gamename_sel = document.getElementById("name");
          gamename_sel.innerHTML = `<option value="" disabled selected hidden>
            --Please select GameName--
          </option>`;
          getAllrequest.onsuccess = () => {
            result = getAllrequest.result;
            manu_res = result;
            for (i = 0; i < result.length; ++i) {
              gamename_sel.innerHTML += `
              <option value="${result[i].name}">${result[i].name}</option>
              `;
            }
          };
        });
      }
      function select_name() {
        var nSel = document.getElementById("name");
        index = nSel.selectedIndex;
        var selected_game = nSel[index].text;
        if (manu_res != null) {
          result_game = manu_res[index - 1];
        }
      }
      // 查询vr_pp
      function query(dbName, version) {
        tbody.innerHTML = ``;
        if (result_game != null) {
          console.log("here!");
          tbody.innerHTML += `<h2>${result_game.name}</h2>
          <h6>Platform: ${result_game.platform}</h6>`;
        }
      }
      //方法三
      $.ajax({
        url: "pp_db_with_cus_cp.json",
        type: "GET",
        dataType: "json",
        async: false,
        success: function (data) {
          vrpp_lis = data;
        },
      });
      //类似于方法二
      delDB(dbName);
      console.log(vrpp_lis);
      console.log("@@@@@@@");
      initDB(dbName, version);
    </script>
  </body>
</html>
